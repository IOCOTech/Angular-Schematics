import { HttpBackend } from '@angular/common/http';
import { HttpClientTestingModule } from '@angular/common/http/testing';
import { NgModule } from '@angular/core';
import { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';
import { NoopAnimationsModule } from '@angular/platform-browser/animations';
import { Router } from '@angular/router';
import { AbstractAppAuthentication } from '../app-services/authentication/authentication.app.abstract';
import { AppConfig } from '../app-services/config/config.app';
import { AppMonitoring } from '../app-services/monitoring/monitor.app';
import '../extension-methods/router.extension';
import { AbstractEndpoints } from '../services/endpoints/endpoints.service.abstract';
import { AbstractServiceUser } from '../services/user/user.service.abstract';
import { UnitTestHelpers } from './unit-test.helper';


const modules = [
    HttpClientTestingModule,
    NoopAnimationsModule
];

@NgModule({
    imports: modules,
    exports: modules,
    providers: [
        { provide: AbstractAppAuthentication, useValue: UnitTestHelpers.MockObjects.abstractAppAuthentication },
        { provide: AbstractEndpoints, useValue: UnitTestHelpers.MockObjects.abstractAbstractEndpoints },
        { provide: AbstractServiceUser, useValue: UnitTestHelpers.MockObjects.abstractServiceUser },
        { provide: HttpBackend, useValue: {} },
        { provide: AppConfig, useValue: UnitTestHelpers.MockObjects.abstractAppConfig },
        { provide: AppMonitoring, useValue: UnitTestHelpers.MockObjects.appMonitoring },
        { provide: MAT_DIALOG_DATA, useValue: {} },
        { provide: MatDialogRef, useValue: {} }
    ]
    // entryComponents: [CourseDialogComponent] TODO: Add dialog components here

})

export class UnitTestModule {

    constructor(router: Router) {
        router.InitializeExtensionMethods();
    }
}
